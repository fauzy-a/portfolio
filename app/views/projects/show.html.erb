<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <%= link_to projects_path, class: "btn btn-link text-decoration-none p-0 mb-4 text-secondary" do %>
        <i class="fas fa-arrow-left me-2"></i> Kembali ke Portfolio
      <% end %>

      <h1 class="display-4 fw-bold mb-3"><%= @project.title %></h1>
      
      <div class="mb-5">
        <% if @project.images.attached? %>
          <div class="card shadow-sm border-0 mb-2 overflow-hidden">
            <a href="<%= url_for(@project.images.first) %>" class="glightbox" data-gallery="gallery-<%= @project.id %>">
              <%= image_tag @project.images.first, class: "img-fluid w-100", style: "max-height: 500px; object-fit: cover;" %>
            </a>
          </div>

          <% if @project.images.count > 1 %>
            <div class="row g-2">
              <% @project.images.drop(1).each do |image| %> 
                <div class="col-3 col-md-2">
                  <a href="<%= url_for(image) %>" class="glightbox" data-gallery="gallery-<%= @project.id %>">
                    <%= image_tag image, class: "img-fluid rounded shadow-sm", style: "height: 80px; width: 100%; object-fit: cover; cursor: pointer;" %>
                  </a>
                </div>
              <% end %>
            </div>
            <p class="text-muted small text-center mt-2"><i class="fas fa-search-plus"></i> Klik gambar untuk memperbesar</p>
          <% end %>

        <% else %>
          <div class="bg-light py-5 text-center rounded">
            <i class="fas fa-image fa-5x text-muted mb-3"></i>
            <p class="text-muted">Belum ada screenshot yang diupload.</p>
          </div>
        <% end %>
      </div>

      <div class="row">
        <div class="col-md-8">
          <h4 class="fw-bold border-bottom pb-2">Tentang Project</h4>
          <p class="lead text-muted" style="white-space: pre-wrap;"><%= @project.description %></p>
        </div>
        <div class="col-md-4">
          <div class="bg-white p-4 rounded shadow-sm border">
            <h5 class="fw-bold mb-3">Links & Action</h5>
            <div class="d-grid gap-2">
              <% if @project.github_url.present? %>
                <% clean_url = @project.github_url.start_with?('http') ? @project.github_url : "https://#{@project.github_url}" %>
                <a href="<%= clean_url %>" target="_blank" class="btn btn-dark">
              <i class="bi bi-github me-2"></i> GitHub
              </a>
              <% end %>
              
              <% if user_signed_in? %>
                <%= link_to "Edit", edit_project_path(@project), class: "btn  btn-outline-warning" %>
                <%= button_to "Delete", @project, method: :delete, 
                  form: { data: { turbo_confirm: "Apakah Anda yakin ingin menghapus project '#{@project.title}'? Tindakan ini tidak dapat dibatalkan." } }, 
                  class: "btn btn-sm btn-outline-danger" %>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>